
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ROS Service interface &#8212; pracmln 1.2.3 documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/css/custom_styles.css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="API-Specification" href="apidoc.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="_static/bootstrap-sphinx.js "></script>

  </head><body>
  
  <script src="_static/js/modernizr.min.js"></script>
  <script type="text/javascript" src="_static/js/d3.min.js"></script>
  <script type="text/javascript" src="_static/js/d3.geom.min.js"></script>
  <script type="text/javascript" src="_static/js/d3.layout.min.js"></script>

    
    

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html"><span><img src="_static/pracmln-brightondark-transp.png"></span>
          pracmln</a>
        <span class="navbar-text navbar-version pull-left"><b>1.2</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="features.html">Feature Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="tools.html">Tools for Statistical Relation Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="mlnquerytool.html">MLN Query-Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="mlnlearningtool.html">MLN-Learning-Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="learningmethods.html">Learning Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="inferencemethods.html">Inference Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="mln_syntax.html">MLN Syntax and Semantics</a></li>
<li class="toctree-l1"><a class="reference internal" href="mlntutorial.html">Tutorial: Learning and Inference in Markov Logic Networks</a></li>
<li class="toctree-l1"><a class="reference internal" href="evaluation.html">Tools for MLN evaluation</a></li>
<li class="toctree-l1"><a class="reference internal" href="apidoc.html">API-Specification</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">ROS Service interface</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">ROS Service interface</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#server-methods">Server methods</a></li>
<li><a class="reference internal" href="#example-client">Example client</a></li>
<li><a class="reference internal" href="#messages">Messages</a></li>
<li><a class="reference internal" href="#services">Services</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="apidoc.html" title="Previous Chapter: API-Specification"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; API-Specification</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/tutorial.rst.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <div class="section" id="ros-service-interface">
<h1>ROS Service interface<a class="headerlink" href="#ros-service-interface" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This is a tutorial for the ROS service that can be used
to query an MLN. We will describe the implemantation
of the server together with the ROS messages that are
associated with this project. We will also present an
example client program that can be used as a template.</p>
</div>
<div class="section" id="server-methods">
<h2>Server methods<a class="headerlink" href="#server-methods" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt>
<code class="sig-prename descclassname">scripts.mln_server.</code><code class="sig-name descname">handle_mln_query</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">req</span></em><span class="sig-paren">)</span></dt>
<dd><blockquote>
<div><p>Handles the query from the client. It expects
<em>req</em> to have two fields, <em>req.query</em> and an optional
<em>req.config</em>. <em>req.query</em> should be of type <em>MLNQuery</em> while
<em>req.config</em> should be of type <em>MLNConfig</em>.</p>
<p>It returns a list of <em>AtomProbPair</em> objects. Each element of the
list is an atom with it’s corresponding degree of truth.</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt>
<code class="sig-prename descclassname">scripts.mln_server.</code><code class="sig-name descname">mln_interface_server</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Keeps an infinite loop while waiting
for clients to ask for the service.</p>
</dd></dl>

<dl class="py function">
<dt>
<code class="sig-prename descclassname">scripts.mln_server.Storage.</code><code class="sig-name descname">getInstance</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Storage is a singleton class that keeps
track of an MLNInfer object together with
the settings for the inference proceedure.</p>
</dd></dl>

</div>
<div class="section" id="example-client">
<h2>Example client<a class="headerlink" href="#example-client" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt>
<code class="sig-prename descclassname">scripts.mln_mln.</code><code class="sig-name descname">mln_interface_client</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">query</span></em>, <em class="sig-param"><span class="n">config</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span></dt>
<dd><blockquote>
<div><p>This is an example of the client quering the service.
The important thing to note is that you have the option
to set the configuration parameters only once and use the
the same settings in further calls.</p>
</div></blockquote>
</dd></dl>

</div>
<div class="section" id="messages">
<h2>Messages<a class="headerlink" href="#messages" title="Permalink to this headline">¶</a></h2>
<dl>
<dt><strong>MLNQuery.msg</strong></dt><dd><p>This ROS message contains the following fields:</p>
<dl class="simple">
<dt><strong>queries</strong> - This message is an ecoding of the queries that will</dt><dd><p>sent to the service.</p>
</dd>
</dl>
</dd>
<dt><strong>MLNResponse.msg</strong></dt><dd><p>This ROS message contains the follwing fields:</p>
<dl class="simple">
<dt><strong>results</strong> - This is what is returned by the service. results</dt><dd><p>is a list of <em>AtomProbPair</em> objects. Each atom is associated
with a probability value.</p>
</dd>
</dl>
</dd>
<dt><strong>MLNConfig.msg</strong></dt><dd><p>This is a message that is used to initialize the
configuration parameters for quering the service.
You have an option to pass this argument only once
and reuse the same configurations over and over.
It contains the following fields:</p>
<p><strong>mlnFiles</strong> - a *.mln file that describes the MLN</p>
<p><strong>db</strong> - the evidence database</p>
<p><strong>method</strong> - the inference method to be used</p>
<p><strong>engine</strong> - the inference engine to be used</p>
<p><strong>output_filename</strong> - the name of the output filename</p>
<p><strong>saveResults</strong> - this field should be set to true if you wish to save the results</p>
<p><strong>logic</strong> - specifies the logic to be used for inference</p>
<p><strong>grammar</strong> - specifies the grammar to be used</p>
</dd>
<dt><strong>AtomProbPair.msg</strong></dt><dd><p>This message is a pair of an Atom and a Probabality.
It contains the following fields:</p>
<p><strong>atom</strong> - string describing the atom</p>
<p><strong>prob</strong> - a probability value for the atom’s degree of truth</p>
</dd>
</dl>
</div>
<div class="section" id="services">
<h2>Services<a class="headerlink" href="#services" title="Permalink to this headline">¶</a></h2>
<dl>
<dt><strong>MLNInterface.srv</strong></dt><dd><p>This is the main service. It contains two fields:</p>
<p><strong>MLNQuery</strong> - This is the query string</p>
<dl class="simple">
<dt><strong>MLNConfig</strong> - This specifies which engine, inference method</dt><dd><p>etc is going to be used for inference. This should be
set at least once.</p>
</dd>
</dl>
</dd>
</dl>
</div>
</div>


    </div>
      
  </div>
</div>
  
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2020, Daniel Nyga.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.3.1.<br/>
    </p>
  </div>
</footer>

  </body>
</html>